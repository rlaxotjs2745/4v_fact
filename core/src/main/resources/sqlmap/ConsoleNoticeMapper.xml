<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.fact.core.model.ConsoleNoticeMapper">
    <select id="getConsoleNoticeByUserIdx" parameterType="long" resultType="kr.or.fact.core.model.DTO.ConsoleNoticeVO">
        SELECT
            *
        FROM TB_CONSOLE_NOTICE WHERE IDX_CONSOLE_NOTICE = #{idx_console_notice}
    </select>

    <select id="getConsoleNoticeList" parameterType="hashmap" resultType="kr.or.fact.core.model.DTO.ConsoleNoticeVO">
        SELECT
            *
        FROM (
                 SELECT ROW_NUMBER() OVER(ORDER by #{order_field} DESC) AS row_num
              ,t.*
                 FROM TB_CONSOLE_NOTICE t
                 WHERE ROWNUM <![CDATA[<=]]> #{page_num}*#{amount}
             )
        WHERE row_num <![CDATA[>]]> (#{page_num} -1)*#{amount}
    </select>

    <select id="getConsoleNoticeFilteredList" parameterType="kr.or.fact.core.model.DTO.ParamPageListFilteredVO" resultType="kr.or.fact.core.model.DTO.ConsoleNoticeVO">
        SELECT
        *
        FROM (
        SELECT ROW_NUMBER() OVER(ORDER by #{order_field} DESC) AS row_num
        t.*
        FROM (
        SELECT * FROM TB_CONSOLE_NOTICE
        <if test="filter1 == 0">
            WHERE NOTICE_TYPE != 1
        </if>
        <if test="filter1 == 1">
            WHERE NOTICE_TYPE == 1
        </if>
        ) t
        WHERE ROWNUM <![CDATA[<=]]> #{page_num}*#{amount}
        )
        WHERE row_num <![CDATA[>]]> (#{page_num} -1)*#{amount}
    </select>

    <insert id="insertConsoleNotice" parameterType="kr.or.fact.core.model.DTO.ConsoleNoticeVO">

    </insert>
    <update id="updConsoleNotice"  parameterType="kr.or.fact.core.model.DTO.ConsoleNoticeVO">

    </update>


</mapper>