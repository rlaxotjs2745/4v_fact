<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.fact.core.model.PRContentMapper">

    <select id="getMainPRContentCount" resultType="int">
        SELECT COUNT(*) FROM TB_PR_CONTENT  WHERE IS_MAIN_PAGE=1
    </select>
    <select id="getWebpagePRContentCount" resultType="int">
        SELECT COUNT(*) FROM TB_PR_CONTENT  WHERE IS_SHOW=1 AND PR_CONTENT_STATUS=1
    </select>
    <select id="getPRContentList" parameterType="hashmap" resultType="kr.or.fact.core.model.DTO.PRContentVO">
        SELECT
            IDX_PR_CONTENT
             ,PR_CONTENT_NUM
             ,SUBJECT
             ,IS_FILE
             ,IS_NEW
             ,AUTHOR
             ,SHOW_START_DATE
             ,VIEW_COUNT
        FROM (
                 SELECT ROW_NUMBER() OVER(ORDER by #{order_field} DESC) AS row_num
        ,IDX_PR_CONTENT
                      ,PR_CONTENT_NUM
                      ,SUBJECT
                      ,IS_FILE
                      ,IS_NEW
                      ,AUTHOR
                      ,SHOW_START_DATE
                      ,VIEW_COUNT
                 FROM (
                          SELECT * FROM TB_PR_CONTENT  WHERE IS_SHOW=1 AND PR_CONTENT_STATUS=1
                      )

                 WHERE ROWNUM <![CDATA[<=]]> #{page_num}*#{amount}
             )
        WHERE row_num <![CDATA[>]]> (#{page_num} -1)*#{amount}
    </select>





    <select id="getMainPRContentList" parameterType="hashmap" resultType="kr.or.fact.core.model.DTO.PRContentVO">
        SELECT * FROM TB_PR_CONTENT  WHERE  IS_MAIN_PAGE=1;
    </select>

</mapper>